<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="es" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<ui:composition template="/WEB-INF/templates/template-externo.xhtml">
	<ui:define name="title">#{texto.CronometroRubik}</ui:define>
	<ui:define name="head">
		<link href="#{sesionManagedBean.contextPath}/resources/css/style.css"
			rel="stylesheet" type="text/css" />
		<link
			href="#{sesionManagedBean.contextPath}/resources/css/modificaciones-bootstrap.css"
			rel="stylesheet" type="text/css" />
			<script src="#{sesionManagedBean.contextPath}/resources/js/twistysim.js"></script>
		<style>
body {
	min-width: 360px;
}
</style>
	</ui:define>
	<ui:define name="body">
		<div class="col-xs-12">
			<h:form>
				<nav class="navbar navbar-default menu" style="margin:0;"> <!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header col-xs-12">
					<div class="navbar-brand hidden" style="padding: 9px !important;">
						<h:selectOneMenu styleClass="form-control input-sm"
							style="max-width: 100px;" value="#{sesionManagedBean.idioma}"
							onchange="submit()"
							valueChangeListener="#{sesionManagedBean.localeChange}">
							<f:selectItem itemValue="1" itemLabel="SesiÃ³n 1"></f:selectItem>
						</h:selectOneMenu>
					</div>
					<div class="navbar-brand" style="padding: 9px !important;">
						<h:selectOneMenu styleClass="form-control input-sm"
							style="display:inline; max-width: 100px;"
							value="#{rubikManagedBean.tipoCubo}" onchange="submit()"
							valueChangeListener="#{rubikManagedBean.cambioCubo}">
							<!-- 						<f:selectItem itemValue="5" itemLabel="2X2X2"></f:selectItem> -->
							<!-- 						<f:selectItem itemValue="6" itemLabel="3X3X3"></f:selectItem> -->
							<f:selectItems value="#{rubikManagedBean.listarCubos()}" var="l"
								itemValue="#{l.idTipo}" itemLabel="#{l.nombreTipo}"></f:selectItems>
						</h:selectOneMenu>
					</div>
					<div class="navbar-brand hidden-xs hidden-sm">
						#{texto.Inspeccion}:
						<div id="lblTiempoInspeccion" style="display: inline;">#{configuracionManagedBean.tiempoInspeccion.valorEntero}</div>
						#{texto.Segundos}.
					</div>
					<div class="nav navbar-nav navbar-right" style="margin: 0;">
						<ul class="nav navbar-nav navbar-right">
							<li><h:commandLink id="mezclaAleatoria"
									styleClass="btn btn-default navbar-brand"
									action="#{rubikManagedBean.mezclaAleatoria()}"
									title="#{texto.MezclaAleatoria}">
									<span class="glyphicon glyphicon-random"></span>
								</h:commandLink></li>
							<li>
								<button id="mezcla" class="btn btn-default navbar-brand"
									type="button" data-toggle="modal"
									data-target="#mezclaPersonalizada"
									title="#{texto.MezclaPersonalizada}">
									<span class="fa fa-pencil"></span>
								</button>
							</li>
						</ul>
					</div>
				</div>
				</nav>
			</h:form>
		</div>
		<div class="col-xs-12 col-md-10 col-md-offset-1"
			style="background-color: #fff;">
			<h:form id="form">
				<!-- <h2 class="text-center">#{texto.CronometroRubik}
					#{rubikManagedBean.cubo.nombre}</h2> -->
				<div class="row">
					<h5 class="text-center" id="secuencia">#{rubikManagedBean.secuenciaMezcla}</h5>
				</div>
				<div class="col-xs-12 col-sm-7 col-md-8 col-lg-9"
					style="float: left;">
					<div style="padding-right: 20px; padding-left: 20px;">
						<span class="help-block hidden-xs"></span>
						<div class="row">
							<div class="alert alert-info hidden-xs" role="alert">
								#{texto.Pulsa} <strong>[#{texto.BarraEspaciadora}]</strong>
								#{texto.ParaIniciar}, #{texto.PulsaCualquierTeclaParaDetener}.
							</div>
							<h:commandButton id="guardarTiempo" styleClass="hidden"
								value="Guardar Tiempo"
								action="#{rubikManagedBean.agregarTiempo()}" />
						</div>
						<div class="row">
							<div id="timer" class="col-xs-12">
								<div id="lblTiempo">#{rubikManagedBean.duracion}</div>
							</div>
						</div>
						<div>
							<div id="oculto" class="hidden">
								<script>
									#{rubikManagedBean.setTiempoInspeccionSegundos(configuracionManagedBean.tiempoInspeccion.valorEntero)};
									</script>
								<table class="table table-bordered">
									<tr>
										<td>tiempo_inspeccion_segundos</td>
										<td><h:inputText id="txtTiempoInspeccionSegundos"
												value="#{rubikManagedBean.tiempoInspeccionSegundos}" /></td>
									</tr>
									<tr>
										<td>tiempo_inspeccion_usado_milisegundos</td>
										<td><h:inputText
												id="txtTiempoInspeccionUsadoMilisegundos"
												value="#{rubikManagedBean.tiempoInspeccionUsadoMilisegundos}" /></td>
									</tr>
									<tr>
										<td>tiempo_inspeccion_usado_texto</td>
										<td><h:inputText id="txtTiempoInspeccionUsadoTexto"
												value="#{rubikManagedBean.tiempoInspeccionUsadoTexto}" /></td>
									</tr>
									<tr>
										<td>tiempo_milisegundos</td>
										<td><h:inputText id="txtTiempoMilisegundos"
												value="#{rubikManagedBean.tiempoMilisegundos}" /></td>
									</tr>
									<tr>
										<td>tiempo_texto</td>
										<td><h:inputText id="txtTiempo"
												value="#{rubikManagedBean.duracion}" /></td>
									</tr>
									<tr>
										<td>penalizacion</td>
										<td><h:inputText id="txtPenalizacion"
												value="#{rubikManagedBean.penalizacion}" /></td>
									</tr>
									<tr>
										<td>dnf</td>
										<td><h:inputText id="txtDnf"
												value="#{rubikManagedBean.dnf}" /></td>
									</tr>
									<tr>
										<td>comentario</td>
										<td><h:inputText id="txtComentario"
												value="#{rubikManagedBean.comentario}" /></td>
									</tr>
									<tr>
										<td>video</td>
										<td><h:inputText id="txtVideo"
												value="#{rubikManagedBean.video}" /></td>
									</tr>
									<tr>
										<td></td>
										<td><h6 id="lbl-comenzar">Comenzar</h6></td>
									</tr>
								</table>

							</div>
						</div>
					</div>
					<div class="col-xs-12">
						<table id="table"
							class="table table-hover table-condensed table-bordered table-striped"
							data-toggle="table" data-pagination="true" data-sort-name="#"
							data-sort-order="desc" data-show-toggle="true"
							data-show-columns="true" data-search="false" data-page-size="5"
							data-page-list="[5,10,15,20,Todos]">
							<thead>
								<tr>
									<th data-halign="right" data-align="center"
										data-sortable="true" data-field="#"><strong>#</strong></th>
									<th class="hidden-xs hidden-sm" data-halign="right"
										data-align="center" data-sortable="true" data-field="cubo"><strong>#{texto.Cubo}:</strong></th>
									<th data-halign="right" data-align="center"
										data-sortable="true" data-field="secuencia"><strong>#{texto.Secuencia}:</strong></th>
									<th data-halign="right" data-align="center"
										data-sortable="true" data-field="tiempo"><strong>#{texto.Tiempo}:</strong></th>
									<th style="min-width: 140px;" data-halign="right"
										data-align="center" data-field="acciones"><strong>#{texto.Acciones}:</strong></th>
								</tr>
							</thead>
							<c:forEach items="#{rubikManagedBean.sesionRubikActual.tiempos}"
								var="tiempo" varStatus="i">
								<tr>
									<td>#{i.index+1}</td>
									<td class="hidden-xs hidden-sm">#{tiempo.cubo.nombre}</td>
									<td>#{tiempo.tiempoRubikDTO.mezcla}</td>
									<td>#{tiempo.tiempoRubikDTO.tiempoTexto}</td>
									<td><h:commandButton
											action="#{rubikManagedBean.mostrarDNF(tiempo)}"
											styleClass="btn btn-sm #{(tiempo.tiempoRubikDTO.dnf)?'btn-info':'btn-default'}"
											value="DNF"></h:commandButton> <h:commandButton
											action="#{rubikManagedBean.mostrarPenalizacion(tiempo)}"
											styleClass="btn btn-sm #{(tiempo.tiempoRubikDTO.penalizacion)?'btn-info':'btn-default'}"
											style="margin-left: 4px;" value="+2"></h:commandButton> <h:commandButton
											action="#{rubikManagedBean.eliminarTiempo(tiempo)}"
											styleClass="btn btn-sm btn-danger" style="margin-left: 4px;"
											value="X"></h:commandButton></td>
								</tr>
							</c:forEach>
						</table>
					</div>
				</div>
	
				<h:panelGroup layout="block" id="imagenCubo2x2"
					rendered="#{rubikManagedBean.tipoCubo==5}">
					<ui:include src="/WEB-INF/includes/2x2.xhtml" />
				</h:panelGroup>
				<h:panelGroup layout="block" id="imagenCubo3x3"
					rendered="#{rubikManagedBean.tipoCubo==6 || rubikManagedBean.tipoCubo==11 || rubikManagedBean.tipoCubo==12 || rubikManagedBean.tipoCubo==13}">
					<ui:include src="/WEB-INF/includes/3x3.xhtml" />
				</h:panelGroup>
				<h:panelGroup layout="block" id="imagenCubo4x4"
					rendered="#{rubikManagedBean.tipoCubo==7 || rubikManagedBean.tipoCubo==14}">
					<ui:include src="/WEB-INF/includes/4x4.xhtml" />
				</h:panelGroup>
				<h:panelGroup layout="block" id="imagenCubo5x5"
					rendered="#{rubikManagedBean.tipoCubo==8 || rubikManagedBean.tipoCubo==15}">
					<ui:include src="/WEB-INF/includes/5x5.xhtml" />
				</h:panelGroup>
				<h:panelGroup layout="block" id="imagenCubo6x6"
					rendered="#{rubikManagedBean.tipoCubo==9}">
					<ui:include src="/WEB-INF/includes/6x6.xhtml" />
				</h:panelGroup>
				<h:panelGroup layout="block" id="imagenCubo7x7"
					rendered="#{rubikManagedBean.tipoCubo==10}">
					<ui:include src="/WEB-INF/includes/7x7.xhtml" />
				</h:panelGroup>
				<h:panelGroup layout="block" id="imagenSkewb"
					rendered="#{rubikManagedBean.tipoCubo==24}">
					<ui:include src="/WEB-INF/includes/skewb.xhtml" />
				</h:panelGroup>
				<div class="col-xs-12 col-sm-5 col-md-4 col-lg-3 text-center">
					<div id="lblavgTiempo">AVG:
						#{rubikManagedBean.sesionRubikActual.promedio()}</div>
					<div id="lblao5Tiempo">Ao5:
						#{rubikManagedBean.sesionRubikActual.ao5actual()}</div>
					<div id="lblao12Tiempo">Ao12:
						#{rubikManagedBean.sesionRubikActual.ao12actual()}</div>
				</div>
				<span class="help-block"></span>
				<div class="col-xs-12 col-sm-5 col-md-4 col-lg-3 text-center">
					<h:commandButton action="#{rubikManagedBean.limpiarTiempos()}"
						rendered="#{rubikManagedBean.sesionRubikActual.tiempos.size() > 0}"
						styleClass="btn btn-danger pull-right"
						style="margin-left: 4px; margin-top:8px;"
						value="#{texto.LimpiarTiempos}"></h:commandButton>
					<h:commandButton action="#{rubikManagedBean.guardarSesionRubik()}"
						rendered="#{not empty sesionManagedBean.usuarioLogueado and rubikManagedBean.sesionRubikActual.tiempos.size() > 0}"
						styleClass="btn btn-success pull-right"
						style="margin-left: 4px; margin-top:8px;"
						value="#{texto.GuardarTiempos}"></h:commandButton>
				</div>
			</h:form>
		</div>
		<!-- Button trigger modal -->
		<!-- Modal -->
		<h:form id="formMezclaPersonalizada">
			<div class="modal fade" id="mezclaPersonalizada" tabindex="-1"
				role="dialog" aria-labelledby="mezclaPersonalizadaLabel"
				style="background-color: rgba(0, 0, 0, 0.5);">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal"
								aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
							<h4 class="modal-title" id="mezclaPersonalizadaLabel">#{texto.IngreseSuMezclaPersonalizada}</h4>
						</div>
						<div class="modal-body">
							<h:inputTextarea styleClass="form-control"
								value="#{rubikManagedBean.secuenciaMezcla}"></h:inputTextarea>
						</div>
						<div class="modal-footer">
							<h:commandButton styleClass="btn btn-success"
								action="#{rubikManagedBean.mezclaPersonalizada()}"
								value="#{texto.Mezclar}"></h:commandButton>
						</div>
					</div>
				</div>
			</div>
		</h:form>
	</ui:define>
	<ui:define name="foot">
		<script
			src="#{sesionManagedBean.contextPath}/resources/js/cronolite.js"></script>
	</ui:define>
</ui:composition>
</html>