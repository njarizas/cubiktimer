<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Cronómetro Rubik</title>
	<link href="resources/css/style.css" rel="stylesheet" type="text/css" />
	<script src="resources/js/jquery-3.2.1.min.js" type="text/javascript"></script>
	<!-- <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet"></link>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script> -->
	<link href="resources/css/bootstrap.min.css" rel="stylesheet"
		type="text/css" />
	<script type="text/javascript" src="resources/js/bootstrap.js">
	</script>
	<link href="resources/css/sweetalert.css" rel="stylesheet"
		type="text/css" />
	<script src="resources/js/sweetalert.min.js" type="text/javascript"></script>
</h:head>
<h:body style="min-width: 360px;">
	<ui:include src="/WEB-INF/banners/menu.xhtml" />
	<div class="col-xs-12">
		<h:form>
			<nav class="navbar navbar-default menu" style="margin:0;"> <!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header col-xs-12">
				<div class="navbar-brand" style="padding: 9px !important;">
					<h:selectOneMenu styleClass="form-control input-sm"
						style="max-width: 100px;" value="#{sesionManagedBean.idioma}"
						onchange="submit()"
						valueChangeListener="#{sesionManagedBean.localeChange}">
						<f:selectItem itemValue="1" itemLabel="Sesión 1"></f:selectItem>
					</h:selectOneMenu>
				</div>
				<div class="navbar-brand" style="padding: 9px !important;">
					<h:selectOneMenu styleClass="form-control input-sm"
						style="display:inline; max-width: 100px;"
						value="#{rubikManagedBean.tipoCubo}" onchange="submit()"
						valueChangeListener="#{rubikManagedBean.cambioCubo}">
<!-- 						<f:selectItem itemValue="5" itemLabel="2X2X2"></f:selectItem> -->
<!-- 						<f:selectItem itemValue="6" itemLabel="3X3X3"></f:selectItem> -->
						<f:selectItems value="#{rubikManagedBean.listarCubos()}" var="l" itemValue="#{l.idTipo}" itemLabel="#{l.nombreTipo}"></f:selectItems>
					</h:selectOneMenu>
				</div>
				<div class="navbar-brand hidden-xs hidden-sm">
					#{texto.Inspeccion}:
					<div id="lblTiempoInspeccion" style="display: inline;">#{configuracionManagedBean.tiempoInspeccion}</div>
					#{texto.Segundos}.
				</div>
				<div class="nav navbar-nav navbar-right" style="margin: 0;">
					<ul class="nav navbar-nav navbar-right">
						<li><h:commandLink id="mezclaAleatoria"
								styleClass="btn btn-default navbar-brand"
								action="#{rubikManagedBean.mezclaAleatoria()}"
								title="#{texto.MezclaAleatoria}">
								<span class="glyphicon glyphicon-random"></span>
							</h:commandLink></li>
						<li>
							<button id="configuraciones" class="btn btn-default navbar-brand"
								type="button" data-toggle="modal" data-target="#myModal"
								title="#{texto.Configuraciones}">
								<span class="glyphicon glyphicon-cog"></span>
							</button>
						</li>
					</ul>
				</div>
			</div>
			</nav>
		</h:form>
	</div>
	<div class="col-xs-12 col-md-10 col-md-offset-1"
		style="background-color: #fff;">
		<h:form id="form">
			<h2 class="text-center">Cronómetro de Cubo de Rubik #{rubikManagedBean.cubo.nombre}</h2>
			<div class="row">
				<h5 class="text-center" id="secuencia">#{rubikManagedBean.secuenciaMezcla}</h5>
			</div>
			<div class="row" id="boton">
				<div class="col-xs-12 col-sm-7 col-md-8 col-lg-9">
					<div style="padding-right: 20px; padding-left: 20px;">
						<span class="help-block hidden-xs"></span>
						<div class="row">
							<div class="alert alert-info hidden-xs" role="alert">
								#{texto.Pulsa} <strong>[#{texto.BarraEspaciadora}]</strong>
								#{texto.ParaIniciar}, #{texto.PulsaCualquierTeclaParaDetener}.
							</div>
							<h:commandButton id="guardarTiempo" styleClass="hidden"
								value="Guardar Tiempo"
								action="#{rubikManagedBean.agregarTiempo()}" />
						</div>
						<div class="row">
							<div id="timer" class="col-xs-12">
								<div id="lblTiempo">#{rubikManagedBean.duracion}</div>
							</div>
						</div>
						<div>
							<div id="oculto" class="hidden">
								<script>
									#{rubikManagedBean.setTiempoInspeccionSegundos(configuracionManagedBean.tiempoInspeccion)};
									</script>
								<table class="table table-bordered">
									<tr>
										<td>tiempo_inspeccion_segundos</td>
										<td><h:inputText id="txtTiempoInspeccionSegundos"
												value="#{rubikManagedBean.tiempoInspeccionSegundos}" /></td>
									</tr>
									<tr>
										<td>tiempo_inspeccion_usado_milisegundos</td>
										<td><h:inputText
												id="txtTiempoInspeccionUsadoMilisegundos"
												value="#{rubikManagedBean.tiempoInspeccionUsadoMilisegundos}" /></td>
									</tr>
									<tr>
										<td>tiempo_inspeccion_usado_texto</td>
										<td><h:inputText id="txtTiempoInspeccionUsadoTexto"
												value="#{rubikManagedBean.tiempoInspeccionUsadoTexto}" /></td>
									</tr>
									<tr>
										<td>tiempo_milisegundos</td>
										<td><h:inputText id="txtTiempoMilisegundos"
												value="#{rubikManagedBean.tiempoMilisegundos}" /></td>
									</tr>
									<tr>
										<td>tiempo_texto</td>
										<td><h:inputText id="txtTiempo"
												value="#{rubikManagedBean.duracion}" /></td>
									</tr>
									<tr>
										<td>penalizacion</td>
										<td><h:inputText id="txtPenalizacion"
												value="#{rubikManagedBean.penalizacion}" /></td>
									</tr>
									<tr>
										<td>dnf</td>
										<td><h:inputText id="txtDnf"
												value="#{rubikManagedBean.dnf}" /></td>
									</tr>
									<tr>
										<td>comentario</td>
										<td><h:inputText id="txtComentario"
												value="#{rubikManagedBean.comentario}" /></td>
									</tr>
									<tr>
										<td>video</td>
										<td><h:inputText id="txtVideo"
												value="#{rubikManagedBean.video}" /></td>
									</tr>
									<tr>
										<td></td>
										<td><h6 id="lbl-comenzar">Comenzar</h6></td>
									</tr>
								</table>

							</div>
						</div>
					</div>
				</div>
				<h:panelGroup id="imagenCubo2x2"
					rendered="#{rubikManagedBean.tipoCubo==5}">
					<div class="col-xs-12 col-sm-5 col-md-4 col-lg-3 text-center">
						<svg width="240" height="280"> <polygon
							points="90,10 10,90 10,250 150,270 230,190 230,30"
							style="stroke:black;stroke-width:8;" /> <polygon
							points="90,10 50,50 120,60 160,20"
							style="fill:#{rubikManagedBean.cubo.cubo[0][2].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="160,20 120,60 190,70 230,30"
							style="fill:#{rubikManagedBean.cubo.cubo[0][3].codigoColor};stroke:black;stroke-width:4;" />
						<polygon points="50,50 10,90 80,100 120,60"
							style="fill:#{rubikManagedBean.cubo.cubo[1][2].codigoColor};stroke:black;stroke-width:4;" />
						<polygon points="120,60 80,100 150,110 190,70"
							style="fill:#{rubikManagedBean.cubo.cubo[1][3].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="10,90 10,170 80,180 80,100"
							style="fill:#{rubikManagedBean.cubo.cubo[2][2].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="80,100 80,180 150,190 150,110"
							style="fill:#{rubikManagedBean.cubo.cubo[2][3].codigoColor};stroke:black;stroke-width:4;" />
						<polygon points="150,110 150,190 190,150 190,70"
							style="fill:#{rubikManagedBean.cubo.cubo[2][4].codigoColor};stroke:black;stroke-width:4;" />
						<polygon points="190,70 190,150 230,110 230,30"
							style="fill:#{rubikManagedBean.cubo.cubo[2][5].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="10,170 10,250 80,260 80,180"
							style="fill:#{rubikManagedBean.cubo.cubo[3][2].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="80,180 80,260 150,270 150,190"
							style="fill:#{rubikManagedBean.cubo.cubo[3][3].codigoColor};stroke:black;stroke-width:4;" />
						<polygon points="150,190 150,270 190,230 190,150"
							style="fill:#{rubikManagedBean.cubo.cubo[3][4].codigoColor};stroke:black;stroke-width:4;" />
						<polygon points="190,150 190,230 230,190 230,110"
							style="fill:#{rubikManagedBean.cubo.cubo[3][5].codigoColor}; stroke:black;stroke-width:4;" />
						</svg>
					</div>
				</h:panelGroup>
				<h:panelGroup id="imagenCubo3x3"
					rendered="#{rubikManagedBean.tipoCubo==6 || rubikManagedBean.tipoCubo==11 || rubikManagedBean.tipoCubo==12 || rubikManagedBean.tipoCubo==13}">
					<div class="col-xs-12 col-sm-5 col-md-4 col-lg-3 text-center">
						<svg width="240" height="280"> <polygon
							points="90,10 10,90 10,249 150,269 230,189 230,30"
							style="stroke:black;stroke-width:8;" /> <polygon
							points="90,10 63,37 110,44 137,17"
							style="fill:#{rubikManagedBean.cubo.cubo[0][3].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="137,17 110,44 156,50 183,23"
							style="fill:#{rubikManagedBean.cubo.cubo[0][4].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="183,23 156,50 203,57 230,30"
							style="fill:#{rubikManagedBean.cubo.cubo[0][5].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="63,37 37,63 84,70 110,44"
							style="fill:#{rubikManagedBean.cubo.cubo[1][3].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="110,44 84,70 130,76 156,50"
							style="fill:#{rubikManagedBean.cubo.cubo[1][4].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="156,50 130,76 177,83 203,57"
							style="fill:#{rubikManagedBean.cubo.cubo[1][5].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="37,63 10,90 57,97 84,70"
							style="fill:#{rubikManagedBean.cubo.cubo[2][3].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="84,70 57,97 103,103 130,76"
							style="fill:#{rubikManagedBean.cubo.cubo[2][4].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="130,76 103,103 150,110 177,83"
							style="fill:#{rubikManagedBean.cubo.cubo[2][5].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="10,90 10,143 57,150 57,97"
							style="fill:#{rubikManagedBean.cubo.cubo[3][3].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="57,97 57,150 103,156 103,103"
							style="fill:#{rubikManagedBean.cubo.cubo[3][4].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="103,103 103,156 150,163 150,110"
							style="fill:#{rubikManagedBean.cubo.cubo[3][5].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="150,110 150,163 177,136 177,83"
							style="fill:#{rubikManagedBean.cubo.cubo[3][6].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="177,83 177,136 203,110 203,57"
							style="fill:#{rubikManagedBean.cubo.cubo[3][7].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="203,57 203,110 230,83 230,30"
							style="fill:#{rubikManagedBean.cubo.cubo[3][8].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="10,143 10,196 57,203 57,150"
							style="fill:#{rubikManagedBean.cubo.cubo[4][3].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="57,150 57,203 103,209 103,156"
							style="fill:#{rubikManagedBean.cubo.cubo[4][4].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="103,156 103,209 150,216 150,163"
							style="fill:#{rubikManagedBean.cubo.cubo[4][5].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="150,163 150,216 177,189 177,136"
							style="fill:#{rubikManagedBean.cubo.cubo[4][6].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="177,136 177,189 203,163 203,110"
							style="fill:#{rubikManagedBean.cubo.cubo[4][7].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="203,110 203,163 230,136 230,83"
							style="fill:#{rubikManagedBean.cubo.cubo[4][8].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="10,196 10,250 57,256 57,203"
							style="fill:#{rubikManagedBean.cubo.cubo[5][3].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="57,203 57,256 103,262 103,209"
							style="fill:#{rubikManagedBean.cubo.cubo[5][4].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="103,209 103,262 150,269 150,216"
							style="fill:#{rubikManagedBean.cubo.cubo[5][5].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="150,216 150,269 177,242 177,189"
							style="fill:#{rubikManagedBean.cubo.cubo[5][6].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="177,189 177,242 203,216 203,163"
							style="fill:#{rubikManagedBean.cubo.cubo[5][7].codigoColor}; stroke:black;stroke-width:4;" />
						<polygon points="203,163 203,216 230,189 230,136"
							style="fill:#{rubikManagedBean.cubo.cubo[5][8].codigoColor}; stroke:black;stroke-width:4;" />
						</svg>
					</div>
				</h:panelGroup>
			</div>
			<div class="col-xs-12 col-sm-7 col-md-8 col-lg-9">
				<div class="col-xs-12" style="max-height: 180px; overflow: auto;">
					<table id="table"
						class="table table-hover table-condensed table-bordered">
						<tr>
							<td>#</td>
							<td class="hidden-sm">#{texto.Cubo}:</td>
							<td>#{texto.Secuencia}:</td>
							<td>#{texto.Tiempo}:</td>
							<td style="min-width: 140px;">#{texto.Acciones}:</td>
						</tr>
						<c:forEach items="#{rubikManagedBean.sesionRubikActual.tiempos}"
							var="tiempo" varStatus="i">
							<tr>
								<td>#{i.index+1}</td>
								<td class="hidden-sm">#{tiempo.cubo.nombre}</td>
								<td>#{tiempo.tiempoRubikDTO.mezcla}</td>
								<td>#{tiempo.tiempoRubikDTO.tiempoTexto}</td>
								<td><h:commandButton
										action="#{rubikManagedBean.dnf(tiempo)}"
										styleClass="btn btn-sm #{(tiempo.tiempoRubikDTO.dnf)?'btn-info':'btn-default'}"
										value="DNF"></h:commandButton> <h:commandButton
										action="#{rubikManagedBean.penalizacion(tiempo)}"
										styleClass="btn btn-sm #{(tiempo.tiempoRubikDTO.penalizacion)?'btn-info':'btn-default'}"
										style="margin-left: 4px;" value="+2"></h:commandButton> <h:commandButton
										action="#{rubikManagedBean.eliminarTiempo(tiempo)}"
										styleClass="btn btn-sm btn-danger" style="margin-left: 4px;"
										value="X"></h:commandButton></td>
							</tr>
						</c:forEach>
					</table>
				</div>
				<span class="help-block"></span>
				<div class="col-xs-12">
					<h:commandButton action="#{rubikManagedBean.guardarSesionRubik()}"
						styleClass="btn btn-danger pull-right"
						style="margin-left: 4px; margin-top:8px;"
						value="#{texto.GuardarTiempos}"></h:commandButton>
				</div>
			</div>

		</h:form>
<!-- 		<div id="container" -->
<!-- 			class="col-xs-10 col-xs-offset-1 col-sm-5 col-sm-offset-0 col-md-4 col-lg-3 text-center"> -->
<!-- 			<video id="gum" autoplay="autoplay" width="100%"></video> -->
<!-- 			<video id="recorded" autoplay="autoplay" loop="loop" class="hidden"></video> -->
<!-- 			<div> -->
<!-- 				<button id="record" class="hidden" disabled="disabled">Start -->
<!-- 					Recording</button> -->
<!-- 				<button id="play" class="hidden" disabled="disabled">Play</button> -->
<!-- 				<button id="download" class="hidden" disabled="disabled">Download</button> -->
<!-- 			</div> -->
<!-- 		</div> -->
	</div>
	<!-- Button trigger modal -->
	<!-- Modal -->
	<h:form id="formModal">
		<div class="modal fade" id="myModal" tabindex="-1" role="dialog"
			aria-labelledby="myModalLabel"
			style="background-color: rgba(0, 0, 0, 0.5);">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title" id="myModalLabel">Ingrese su mezcla
							personalizada</h4>
					</div>
					<div class="modal-body">
						<h:inputTextarea styleClass="form-control"
							value="#{rubikManagedBean.secuenciaMezcla}"></h:inputTextarea>
						<h:outputLabel value="Tiempo de inspección (segundos):"></h:outputLabel>
						<h:inputText id="txtTiempoInspeccion" styleClass="form-control"
							pt:type="number" pt:min="0" pt:max="15"
							value="#{configuracionManagedBean.tiempoInspeccion}"
							autocomplete="off"></h:inputText>
					</div>
					<div class="modal-footer">
						<h:commandButton styleClass="btn btn-success"
							action="#{rubikManagedBean.mezclaPersonalizada()}"
							value="Guardar"></h:commandButton>
					</div>
				</div>
			</div>
		</div>
	</h:form>
	<c:if test="#{sesionManagedBean.mensaje.mensajePendiente}">
		<script>
                swal("#{sesionManagedBean.mensaje.title}", "#{sesionManagedBean.mensaje.text}", "#{sesionManagedBean.mensaje.type}");
                #{sesionManagedBean.mensaje.setMensajePendiente(false)}
            </script>
	</c:if>
	<script src="resources/js/cronolite.js" type="text/javascript"></script>
<!-- 	<script src="resources/js/crono.js" type="text/javascript"></script> -->
<!-- 	<script src="https://webrtc.github.io/adapter/adapter-latest.js"></script> -->
<!-- 	<script src="resources/js/record.js"></script> -->
<!-- 	<script src="resources/js/ga.js"></script> -->
</h:body>
</html>

